<ui:composition template="/template/layout.xhtml"
     xmlns="http://www.w3.org/1999/xhtml"
     xmlns:f="http://java.sun.com/jsf/core"
     xmlns:h="http://java.sun.com/jsf/html"
     xmlns:ui="http://java.sun.com/jsf/facelets"
     xmlns:p="http://primefaces.org/ui">
     <ui:define name="content">
    
    <h2>Lista de Sindicatos</h2>
    
    <br/>   
    
    <p:commandButton value="Incluir" action="#{sindicatoController.prepareInsert}">
    </p:commandButton>
    
    <br/>     
    <br/>
         
    <h:form id="form">
    <p:dataTable var="sindicato" value="#{sindicatoController.lazyModel}" paginator="true" rows="10"
    			 rowKey="#{sindicato.id}"
                 paginatorTemplate="{RowsPerPageDropdown} {FirstPageLink} {PreviousPageLink} {CurrentPageReport} {NextPageLink} {LastPageLink}"
                 rowsPerPageTemplate="5,10,15" selectionMode="single" selection="#{sindicatoController.sindicato}" id="sindicatoTable" lazy="true">
        <p:ajax event="rowSelect" listener="#{sindicatoController.onRowSelect}" oncomplete="document.getElementById('form:btnOpenShow').click();" />
        <p:column headerText="Id" sortBy="#{sindicato.id}" filterBy="#{sindicato.id}">
            <h:outputText value="#{sindicato.id}" />
        </p:column>
        <p:column headerText="Razão Social" sortBy="#{sindicato.razaoSocial}" filterBy="#{sindicato.razaoSocial}">
            <h:outputText value="#{sindicato.razaoSocial}" />
        </p:column>
        <p:column headerText="Nome Fantasia" sortBy="#{sindicato.nomeFantasia}" filterBy="#{sindicato.nomeFantasia}">
            <h:outputText value="#{sindicato.nomeFantasia}" />
        </p:column>
        <p:column headerText="Responsável" sortBy="#{sindicato.responsavel}" filterBy="#{sindicato.responsavel}">
            <h:outputText value="#{sindicato.responsavel}" />
        </p:column>
        <p:column headerText="Telefones" sortBy="#{sindicato.telefones}" filterBy="#{sindicato.telefones}">
            <h:outputText value="#{sindicato.telefones}" />
        </p:column>
        <p:column headerText="Endereço" sortBy="#{sindicato.endereco.logradouro}" filterBy="#{sindicato.endereco.logradouro}">
            <h:outputText value="#{sindicato.endereco.logradouro}" />
        </p:column>
    </p:dataTable>
             
        <h:commandButton ajax="false" title="Edit" action="/sindicato/show.xhtml" id="btnOpenShow" style="display:none"
            value="Show">    
        <f:setPropertyActionListener target="#{sindicatoController.sindicato}" value="#{sindicatoController.sindicato}" />
        </h:commandButton>
    </h:form>
</ui:define>
</ui:composition>